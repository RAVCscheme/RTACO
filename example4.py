from py_ecc_tester import *
import pickle
import jsonpickle
# op_shares = [16885231262838301801681920301729067389801190671654201410386023814175278264139,16087219483353813438369565807447247769779142193239083391525278436204943634085,15289207703869325075057211313165428149757093714823965372664533058234609004031]
params = (0, curve_order, 0, 0, 0, 0)
# kr = aggr(op_shares)
kr = 11606090388798196334045309303726616473332030238777508078692918848605033928026
# print("kr")
# print(kr)
acc_secret = [1030794786130771647683909794886940126667523415980202221794837225322775563597,5912046010731200534000983903927478532394395118602425701304686685182622028465,10793297235331629420318058012968016938121266821224649180814536145042468493333]
ya = aggr(acc_secret)
print("ya")
print(ya)
ans  = multiply(G1, (ya + kr) %curve_order)
print("ans")
print(ans)

# sh = []
# for i in range(len(op_shares)):
#     share = multiply(G1, (op_shares[i] + acc_secret[i])% curve_order)
#     print("share "+ str(i+1))
#     print(str(i+1)+","+str([share[0], share[1]])+","+str(2))
#     sh.append((FQ(share[0]),FQ(share[1])))
sh = [(16050854292877499418609646908334700395516226022493427300024554417301073183373, 18479193476394470035464233905813517717652307821165056145142004637139050677242),
      (7144770360834079754656307449492287091595549251230571202605890500676085433261, 15973076058549368144853500623403529304817105774937772232061339856140420598377),
      (2159775061055516496755876030548560031367987777709597353313521834539409069983, 2144314517552957858714319376870598813813603416029762777587784772206650020328)]
sh = [(FQ(i[0]), FQ(i[1])) for i in sh]
an = agg_key_accumulator(params, sh)
print(an)


